(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{HMjY:function(e,t,n){"use strict";var r=n("hDBU"),a=n("mXGw"),c=n.n(a),o=n("W0B4"),i=n.n(o),u=n("bBV7"),s=n("wOhW"),l=n("DomE"),d=n("vjOZ"),p=n("nKah"),h=n("Rbzu"),f=n("z3IF"),b=n("2Fjn"),w=n("8Jek"),j=n.n(w),m=n("2huS"),v=n("m0Sz"),O=function(e){var t=e.children,n=e.className,r=Object(b.a)(e,["children","className"]);return c.a.createElement(v.a,Object(f.a)({},r,{className:j()("box",n)}),t)};O.propTypes=Object(h.a)({},m.a.propTypes,{children:i.a.node,className:i.a.string,style:i.a.shape({}),renderAs:i.a.oneOfType([i.a.string,i.a.func])}),O.defaultProps=Object(h.a)({},m.a.defaultProps,{children:null,className:void 0,style:void 0,renderAs:"div"});var g=O,E=(n("DoJ4"),g),k=n("sLSl"),x=function(){return c.a.createElement(l.a,null,c.a.createElement(E,null,c.a.createElement(k.a,null)))},y=function(e){var t=e.children,n=e.router,a=e.role,o=e.redirect,i=Object(d.useMachine)(p.a.withContext({route:n.pathname,role:a,redirect:o})),u=Object(r.default)(i,1)[0];return c.a.createElement(s.a,null,u.matches("init")||u.matches("authorize")?c.a.createElement(x,null):t)};y.propTypes={children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node]),router:i.a.object.isRequired,role:i.a.string,redirect:i.a.string};t.a=Object(u.withRouter)(y)},nKah:function(e,t,n){"use strict";var r=n("UrUy"),a=n.n(r),c=n("R3/3"),o=n("ioJY"),i=n("8q3D"),u=n("TKeM");t.a=Object(o.Machine)({id:"protected",initial:"init",states:{init:{invoke:{id:"initAuth",src:function(){var e=Object(c.default)(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)();case 2:return t=e.sent,e.next=5,t.authenticate();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),onDone:{target:"authorize",actions:Object(o.assign)({userId:function(e,t){return t.data.userId}})},onError:{actions:function(e){return u.a.push("".concat(e.redirect||"/sign_up","?redirect=").concat(e.route).concat(location.search?"&"+location.search.substr(1):""))}}}},authorize:{invoke:{id:"authorize",src:function(){var e=Object(c.default)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.role){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(i.a)();case 4:return n=e.sent,e.next=7,n.service("users").get(t.userId);case 7:if(-1!==e.sent.roles.split(",").indexOf(t.role)){e.next=10;break}throw new Error("unauthorized");case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),onDone:{target:"signed_in"},onError:{actions:function(){return u.a.push("/home")}}}},signed_in:{on:{SIGN_OUT:{actions:function(){return u.a.push("/")}}}}}})},osjh:function(e,t,n){"use strict";n.r(t);var r=n("mXGw"),a=n.n(r),c=n("HMjY");t.default=function(){return a.a.createElement(c.a,null,"protected code page")}},wkjo:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/code",function(){var e=n("osjh");return{page:e.default||e}}])}},[["wkjo",1,0,2]]]);