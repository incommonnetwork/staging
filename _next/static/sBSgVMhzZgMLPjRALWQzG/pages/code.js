(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{HMjY:function(e,n,t){"use strict";var r=t("hDBU"),a=t("mXGw"),o=t.n(a),u=t("W0B4"),c=t.n(u),i=t("bBV7"),s=t("wOhW"),l=t("DomE"),d=t("vjOZ"),p=t("nKah"),h=t("Rbzu"),f=t("z3IF"),b=t("2Fjn"),w=t("8Jek"),j=t.n(w),m=t("2huS"),v=t("m0Sz"),O=function(e){var n=e.children,t=e.className,r=Object(b.a)(e,["children","className"]);return o.a.createElement(v.a,Object(f.a)({},r,{className:j()("box",t)}),n)};O.propTypes=Object(h.a)({},m.a.propTypes,{children:c.a.node,className:c.a.string,style:c.a.shape({}),renderAs:c.a.oneOfType([c.a.string,c.a.func])}),O.defaultProps=Object(h.a)({},m.a.defaultProps,{children:null,className:void 0,style:void 0,renderAs:"div"});var E=O,g=(t("DoJ4"),E),k=t("sLSl"),x=function(){return o.a.createElement(l.a,null,o.a.createElement(g,null,o.a.createElement(k.a,null)))},y=function(e){var n=e.children,t=e.router,a=e.role,u=Object(d.useMachine)(p.a.withContext({route:t.pathname,role:a})),c=Object(r.default)(u,1)[0];return o.a.createElement(s.a,null,c.matches("init")||c.matches("authorize")?o.a.createElement(x,null):n)};y.propTypes={children:c.a.oneOfType([c.a.arrayOf(c.a.node),c.a.node]),router:c.a.object.isRequired,role:c.a.string};n.a=Object(i.withRouter)(y)},nKah:function(e,n,t){"use strict";var r=t("UrUy"),a=t.n(r),o=t("R3/3"),u=t("ioJY"),c=t("8q3D"),i=t("TKeM");n.a=Object(u.Machine)({id:"protected",initial:"init",states:{init:{invoke:{id:"initAuth",src:function(){var e=Object(o.default)(a.a.mark(function e(){var n,t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.a)();case 2:return n=e.sent,e.next=5,n.authenticate();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),onDone:{target:"authorize",actions:Object(u.assign)({userId:function(e,n){return n.data.userId}})},onError:{actions:function(e){return i.a.push("/sign_in?redirect=".concat(e.route))}}}},authorize:{invoke:{id:"authorize",src:function(){var e=Object(o.default)(a.a.mark(function e(n){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.role){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(c.a)();case 4:return t=e.sent,e.next=7,t.service("users").get(n.userId);case 7:if(-1!==e.sent.roles.split(",").indexOf(n.role)){e.next=10;break}throw new Error("unauthorized");case 10:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),onDone:{target:"signed_in"},onError:{actions:function(){return i.a.push("/home")}}}},signed_in:{on:{SIGN_OUT:{actions:function(){return i.a.push("/")}}}}}})},osjh:function(e,n,t){"use strict";t.r(n);var r=t("mXGw"),a=t.n(r),o=t("HMjY");n.default=function(){return a.a.createElement(o.a,null,"protected code page")}},wkjo:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/code",function(){var e=t("osjh");return{page:e.default||e}}])}},[["wkjo",1,0,2]]]);